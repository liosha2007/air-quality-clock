//
// Created by liosha on 20.07.2022.
//

#ifndef AIR_QUALITY_CLOCK_BME280_INIT_H
#define AIR_QUALITY_CLOCK_BME280_INIT_H

#include "globals.h"
#include "Common.h"
#include "EventSystem.h"

#define SCREEN_BME280_INIT_MAX_TRY_COUNT 5

#define BME280_INIT_X 3
#define BME280_INIT_Y  (MHZ19_INIT_Y + SCREEN_FONT_SIZE_1_LINE_HEIGHT)
#define BME280_INIT_WIDTH 100
#define BME280_INIT_HEIGHT 40

#define BME280_INIT_MEASURE_MODE_NO 0b00
#define BME280_INIT_MEASURE_MODE_SINGLE 0b01
#define BME280_INIT_MEASURE_MODE_CONTINUALLY 0b11

#define BME280_INIT_IIRFILTER_MODE_0 0b000 /* Filter off */
#define BME280_INIT_IIRFILTER_MODE_2 0b001
#define BME280_INIT_IIRFILTER_MODE_4 0b010
#define BME280_INIT_IIRFILTER_MODE_8 0b011
#define BME280_INIT_IIRFILTER_MODE_16 0b100

#define BME280_INIT_HUM_OVERSAMPLING_MODE_0 0b000 /* Disable humidity measurement */
#define BME280_INIT_HUM_OVERSAMPLING_MODE_2 0b001
#define BME280_INIT_HUM_OVERSAMPLING_MODE_4 0b010
#define BME280_INIT_HUM_OVERSAMPLING_MODE_8 0b011
#define BME280_INIT_HUM_OVERSAMPLING_MODE_16 0b100

#define BME280_INIT_TMP_OVERSAMPLING_MODE_0 0b000 /* Disable temperature measurement */
#define BME280_INIT_TMP_OVERSAMPLING_MODE_2 0b001
#define BME280_INIT_TMP_OVERSAMPLING_MODE_4 0b010
#define BME280_INIT_TMP_OVERSAMPLING_MODE_8 0b011
#define BME280_INIT_TMP_OVERSAMPLING_MODE_16 0b100

#define BME280_INIT_PRS_OVERSAMPLING_MODE_0 0b000 /* Disable pressure measurement */
#define BME280_INIT_PRS_OVERSAMPLING_MODE_2 0b001
#define BME280_INIT_PRS_OVERSAMPLING_MODE_4 0b010
#define BME280_INIT_PRS_OVERSAMPLING_MODE_8 0b011
#define BME280_INIT_PRS_OVERSAMPLING_MODE_16 0b100

#define BME280_INIT_TEXT_SIZE 1
#define BME280_INIT_CURSOR_X 3
#define BME280_INIT_CURSOR_Y (MHZ19_INIT_CURSOR_Y + SCREEN_FONT_SIZE_1_LINE_HEIGHT)

namespace bme280 {
    void printTextOnDisplay(const char *, uint16_t textColor);
    void init(void (*finishCallback)());
}

#endif //AIR_QUALITY_CLOCK_BME280_INIT_H
